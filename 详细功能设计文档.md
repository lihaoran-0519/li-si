# Li-Si 婚礼项目详细功能设计文档

## 1. 项目概述

### 1.1 项目名称
**Li-Si 婚礼管理系统** (Li-Si Wedding Management System)

### 1.2 项目目标
开发一个现代化的婚礼管理网站，为Li-Si婚礼提供完整的数字化解决方案，包括信息展示、宾客管理、互动功能等，确保婚礼能够顺利进行。

### 1.3 核心价值
- **用户体验优先**: 提供优雅、流畅的用户界面
- **功能完整**: 覆盖婚礼管理的各个环节
- **技术先进**: 采用现代化技术栈，确保性能和可维护性
- **成本控制**: 在保证功能的前提下，控制开发和运营成本

## 2. 功能模块详细设计

### 2.1 主页模块 (Home Page)

#### 2.1.1 核心功能
- **欢迎展示**: 新郎新娘姓名、婚礼主题
- **婚纱照轮播**: 精选婚纱照展示
- **倒计时功能**: 距离婚礼的天数、小时、分钟实时显示
- **导航菜单**: 快速访问各个功能模块

#### 2.1.2 详细设计

##### 页面布局
```
┌─────────────────────────────────────┐
│           导航栏 (固定顶部)            │
├─────────────────────────────────────┤
│                                     │
│        欢迎语 + 新人姓名              │
│                                     │
│        婚纱照轮播区域                │
│      (3-5张精选照片)                │
│                                     │
│        倒计时显示区域                │
│    "距离我们的婚礼还有 X 天"         │
│                                     │
│        快速导航按钮组                │
│   [婚礼信息] [幸福时刻] [感谢]  │
│                                     │
└─────────────────────────────────────┘
```

##### 技术实现
- **倒计时组件**: 使用 `useEffect` 和 `setInterval` 实现实时更新
- **图片轮播**: 使用 Swiper.js 或自定义轮播组件
- **响应式设计**: 移动端优化，支持触摸滑动
- **动画效果**: 使用 Framer Motion 添加页面进入动画

##### 数据需求
```typescript
interface HomePageData {
  brideName: string;
  groomName: string;
  weddingDate: string;
  weddingTheme: string;
  featuredPhotos: Photo[];
  welcomeMessage: string;
}
```

#### 2.1.3 交互设计
- **自动轮播**: 每5秒自动切换照片
- **手动控制**: 支持点击切换和触摸滑动
- **暂停功能**: 鼠标悬停时暂停轮播
- **全屏查看**: 点击照片可全屏查看

### 2.2 婚礼信息模块 (Wedding Info)

#### 2.2.1 核心功能
- **时间安排**: 详细的婚礼流程时间表
- **地点信息**: 婚礼场地、停车场、交通指引
- **联系方式**: 婚礼相关联系人信息

#### 2.2.2 详细设计

##### 页面布局
```
┌─────────────────────────────────────┐
│           婚礼信息导航               │
├─────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐   │
│  │  时间安排   │  │  地点信息   │   │
│  │  (时间轴)   │  │  (地址)     │   │
│  └─────────────┘  └─────────────┘   │
│  ┌─────────────┐  ┌─────────────┐   │
│  │  联系方式   │  │  其他信息   │   │
│  │  (联系人)   │  │  (其他)     │   │
│  └─────────────┘  └─────────────┘   │
└─────────────────────────────────────┘
```

##### 时间安排子模块
- **时间轴设计**: 垂直时间轴展示婚礼流程
- **时间节点**: 
  - 仪式开始 (15:00-16:00)
  - 拍照时间 (16:00-17:00)
  - 晚宴开始 (18:00-20:00)
  - 送客时间 (20:00-21:00)
- **实时状态**: 显示当前进行到哪个环节

##### 地点信息子模块
- **主会场**: 详细地址、联系电话
- **停车场**: 停车位置、收费标准
- **交通指引**: 
  - 地铁线路和站点
  - 公交路线
  - 自驾路线和导航


##### 联系方式子模块
- **婚礼策划**: 姓名、电话、微信
- **场地联系人**: 姓名、电话
- **紧急联系**: 新郎新娘联系方式

#### 2.2.3 技术实现
- **时间轴**: 自定义时间轴组件
- **实时更新**: WebSocket或定时轮询

### 2.3 幸福时刻模块 (Happy Moments)

#### 2.3.1 核心功能
- **照片分类展示**: 按不同时期分类展示照片
- **照片浏览**: 支持放大、滑动浏览
- **照片描述**: 每张照片可添加文字描述
- **分享功能**: 支持照片分享到社交媒体

#### 2.3.2 详细设计

##### 照片分类
- **恋爱时光**: 交往期间的照片
- **求婚瞬间**: 求婚过程的照片
- **婚纱照**: 正式婚纱摄影照片
- **生活点滴**: 日常生活照片

##### 页面布局
```
┌─────────────────────────────────────┐
│           照片分类导航               │
├─────────────────────────────────────┤
│  [恋爱时光] [求婚瞬间] [婚纱照] [生活] │
├─────────────────────────────────────┤
│                                     │
│        照片网格布局                  │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐          │
│  │ 1 │ │ 2 │ │ 3 │ │ 4 │          │
│  └───┘ └───┘ └───┘ └───┘          │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐          │
│  │ 5 │ │ 6 │ │ 7 │ │ 8 │          │
│  └───┘ └───┘ └───┘ └───┘          │
│                                     │
└─────────────────────────────────────┘
```

##### 照片查看器
- **全屏模式**: 点击照片进入全屏查看
- **导航控制**: 上一张/下一张按钮
- **缩放功能**: 支持手势缩放
- **描述显示**: 显示照片拍摄时间和描述

#### 2.3.3 技术实现
- **图片懒加载**: 使用 Intersection Observer API
- **瀑布流布局**: 使用 Masonry 布局
- **图片优化**: 自动压缩和格式转换
- **CDN加速**: 使用 Cloudinary 进行图片存储和优化

### 2.4 感谢致辞模块 (Thanks & Messages)

#### 2.4.1 核心功能
- **感谢致辞**: 新郎新娘的感谢致辞
- **祝福留言**: 宾客可留下祝福留言
- **留言展示**: 展示所有祝福留言
- **视频播放**: 支持感谢视频播放

#### 2.4.2 详细设计

##### 页面布局
```
┌─────────────────────────────────────┐
│           感谢致辞页面               │
├─────────────────────────────────────┤
│                                     │
│    ┌─────────────────────────────┐  │
│    │      感谢致辞内容            │  │
│    │  新郎新娘的感谢致辞文字       │  │
│    │  或视频播放区域              │  │
│    └─────────────────────────────┘  │
│                                     │
│    ┌─────────────────────────────┐  │
│    │      祝福留言区域            │  │
│    │  姓名: [_____________]      │  │
│    │  留言: [_____________]      │  │
│    │      [ 提交祝福 ]           │  │
│    └─────────────────────────────┘  │
│                                     │
│    ┌─────────────────────────────┐  │
│    │      留言展示区域            │  │
│    │  显示所有祝福留言            │  │
│    └─────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

##### 留言功能
- **留言提交**: 宾客可提交祝福留言
- **留言审核**: 支持留言审核功能
- **留言展示**: 按时间顺序展示留言
- **表情支持**: 支持表情符号

##### 视频功能
- **视频上传**: 支持感谢视频上传
- **视频播放**: 使用 HTML5 video 标签
- **播放控制**: 播放、暂停、进度控制
- **全屏播放**: 支持全屏播放模式

#### 2.4.3 技术实现
- **富文本编辑**: 使用 TinyMCE 或 Quill
- **视频处理**: 使用 FFmpeg 进行视频压缩
- **留言系统**: 实时留言更新
- **内容审核**: 敏感词过滤

## 3. 数据库设计

### 3.1 数据表结构

#### 3.1.1 照片表 (photos)
```sql
CREATE TABLE photos (
  id SERIAL PRIMARY KEY,
  category ENUM('婚纱照', '恋爱时光', '求婚瞬间', '生活点滴') NOT NULL,
  url VARCHAR(500) NOT NULL,
  thumbnail_url VARCHAR(500),
  title VARCHAR(200),
  description TEXT,
  sort_order INTEGER DEFAULT 0,
  is_featured BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 3.1.2 祝福留言表 (messages)
```sql
CREATE TABLE messages (
  id SERIAL PRIMARY KEY,
  guest_name VARCHAR(100) NOT NULL,
  guest_phone VARCHAR(20),
  message TEXT NOT NULL,
  is_approved BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 3.1.3 婚礼信息表 (wedding_info)
```sql
CREATE TABLE wedding_info (
  id SERIAL PRIMARY KEY,
  bride_name VARCHAR(100) NOT NULL,
  groom_name VARCHAR(100) NOT NULL,
  wedding_date TIMESTAMP NOT NULL,
  wedding_venue VARCHAR(200) NOT NULL,
  venue_address TEXT NOT NULL,
  venue_phone VARCHAR(20),
  parking_info TEXT,
  contact_person VARCHAR(100),
  contact_phone VARCHAR(20),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```


### 3.2 数据关系
- `photos` 独立表，通过分类管理
- `messages` 独立表，存储祝福留言
- `wedding_info` 单例表，存储婚礼基本信息

## 4. API 接口设计

### 4.1 照片相关接口

#### 4.1.1 获取照片列表
```
GET /api/photos?category=婚纱照&page=1&limit=20
Response: {
  photos: Photo[],
  total: number,
  page: number,
  limit: number
}
```

#### 4.1.2 获取精选照片
```
GET /api/photos/featured
Response: Photo[]
```

### 4.2 留言相关接口

#### 4.2.1 提交祝福留言
```
POST /api/messages
Body: {
  guestName: string,
  guestPhone: string,
  message: string
}
Response: {
  success: boolean,
  message: string
}
```

#### 4.2.2 获取留言列表
```
GET /api/messages?page=1&limit=20
Response: {
  messages: Message[],
  total: number,
  page: number,
  limit: number
}
```

### 4.3 婚礼信息接口

#### 4.3.1 获取婚礼信息
```
GET /api/wedding-info
Response: {
  brideName: string,
  groomName: string,
  weddingDate: string,
  venue: string,
  address: string,
  phone: string,
  parkingInfo: string,
  contactPerson: string,
  contactPhone: string
}
```

## 5. 用户界面设计

### 5.1 设计原则
- **简洁优雅**: 采用简约设计风格
- **温馨浪漫**: 使用暖色调配色方案
- **响应式**: 适配各种设备尺寸
- **易用性**: 操作简单直观

### 5.2 配色方案
- **主色调**: 玫瑰金 (#E8B4B8)
- **辅助色**: 米白色 (#F5F5DC)
- **强调色**: 深红色 (#8B0000)
- **文字色**: 深灰色 (#333333)

### 5.3 字体选择
- **中文**: 思源黑体 (Source Han Sans)
- **英文**: Inter 或 Roboto
- **装饰**: 手写体字体

### 5.4 组件设计

#### 5.4.1 按钮组件
```typescript
interface ButtonProps {
  variant: 'primary' | 'secondary' | 'outline';
  size: 'sm' | 'md' | 'lg';
  children: React.ReactNode;
  onClick?: () => void;
  disabled?: boolean;
}
```

#### 5.4.2 卡片组件
```typescript
interface CardProps {
  title?: string;
  children: React.ReactNode;
  className?: string;
  hover?: boolean;
}
```

#### 5.4.3 表单组件
```typescript
interface FormFieldProps {
  label: string;
  type: 'text' | 'email' | 'tel' | 'textarea';
  value: string;
  onChange: (value: string) => void;
  error?: string;
  required?: boolean;
}
```

## 6. 性能优化

### 6.1 图片优化
- **懒加载**: 使用 Intersection Observer API
- **格式优化**: 自动转换为 WebP 格式
- **尺寸适配**: 根据设备提供不同尺寸
- **CDN加速**: 使用 Cloudinary CDN

### 6.2 代码分割
- **路由分割**: 每个页面独立打包
- **组件分割**: 大型组件按需加载
- **第三方库**: 按需引入第三方库

### 6.3 缓存策略
- **静态资源**: 长期缓存 (1年)
- **API响应**: 短期缓存 (5分钟)
- **数据库查询**: 使用 Redis 缓存

## 7. 安全考虑

### 7.1 数据安全
- **输入验证**: 所有用户输入进行验证
- **SQL注入防护**: 使用参数化查询
- **XSS防护**: 输出内容进行转义
- **CSRF防护**: 使用 CSRF Token

### 7.2 访问控制
- **身份验证**: 宾客身份验证
- **权限控制**: 不同功能模块权限控制
- **频率限制**: API 访问频率限制

### 7.3 数据隐私
- **个人信息保护**: 敏感信息加密存储
- **数据最小化**: 只收集必要信息
- **数据删除**: 支持数据删除功能

## 8. 测试策略

### 8.1 单元测试
- **组件测试**: 使用 React Testing Library
- **工具函数测试**: 使用 Jest
- **API测试**: 使用 Supertest

### 8.2 集成测试
- **用户流程测试**: 端到端测试
- **API集成测试**: 测试API接口
- **数据库测试**: 测试数据操作

### 8.3 性能测试
- **加载时间测试**: 测试页面加载时间
- **并发测试**: 测试系统并发能力
- **压力测试**: 测试系统极限

## 9. 部署和运维

### 9.1 部署流程
1. **代码提交**: 推送到 GitHub 仓库
2. **自动构建**: Vercel 自动构建项目
3. **环境配置**: 配置生产环境变量
4. **数据库迁移**: 执行数据库迁移
5. **域名配置**: 配置自定义域名

### 9.2 监控告警
- **错误监控**: 使用 Sentry 监控错误
- **性能监控**: 使用 Vercel Analytics
- **日志记录**: 记录关键操作日志

### 9.3 备份策略
- **数据库备份**: 每日自动备份
- **代码备份**: Git 版本控制
- **图片备份**: Cloudinary 自动备份

## 10. 项目时间线

### 10.1 第一阶段 (第1周)
- [ ] 项目初始化和环境搭建
- [ ] 数据库设计和创建
- [ ] 基础页面框架搭建
- [ ] 导航和布局组件开发

### 10.2 第二阶段 (第2周)
- [ ] 主页模块开发
- [ ] 婚礼信息模块开发
- [ ] 照片展示模块开发
- [ ] 基础API接口开发

### 10.3 第三阶段 (第3周)
- [ ] 感谢致辞模块开发
- [ ] 留言系统开发
- [ ] 管理后台开发

### 10.4 第四阶段 (第4周)
- [ ] UI/UX优化
- [ ] 动画效果添加
- [ ] 性能优化
- [ ] 测试和调试

### 10.5 第五阶段 (第5周)
- [ ] 部署和上线
- [ ] 数据迁移
- [ ] 用户培训
- [ ] 项目交付

## 11. 风险评估

### 11.1 技术风险
- **第三方服务依赖**: 图片存储服务
- **性能问题**: 大量图片加载可能影响性能
- **兼容性问题**: 不同浏览器兼容性

### 11.2 业务风险
- **数据丢失**: 宾客信息丢失风险
- **系统故障**: 婚礼当天系统故障
- **用户体验**: 用户操作复杂度过高

### 11.3 风险缓解
- **备份策略**: 多重备份保障
- **降级方案**: 提供备用方案
- **用户培训**: 提前进行用户培训

## 12. 成功指标

### 12.1 技术指标
- **页面加载时间**: < 3秒
- **系统可用性**: > 99.9%
- **错误率**: < 0.1%

### 12.2 业务指标
- **用户满意度**: > 95%
- **系统使用率**: > 80%

---

*本文档将根据项目进展持续更新和完善*
