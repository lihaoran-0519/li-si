# Li-Si 婚礼项目技术架构与部署方案

## 1. 技术架构概述

### 1.1 整体架构
采用现代化的全栈Web应用架构，基于Next.js构建，实现前后端一体化开发，确保项目的可维护性和扩展性。

### 1.2 技术选型原则
- **简单易用**: 选择学习成本低、开发效率高的技术栈
- **性能优先**: 确保页面加载速度和用户体验
- **成本控制**: 优先选择免费或低成本的服务
- **维护友好**: 代码结构清晰，便于后续维护

## 2. 前端技术栈

### 2.1 核心框架
- **Next.js 14** 
  - 基于React的全栈框架
  - 支持服务端渲染(SSR)和静态生成(SSG)
  - 内置API路由，无需单独后端服务
  - 优秀的SEO支持，适合婚礼邀请页面

### 2.2 开发语言
- **TypeScript**
  - 提供类型安全，减少运行时错误
  - 更好的IDE支持和代码提示
  - 提高代码可维护性

### 2.3 样式方案
- **Tailwind CSS**
  - 原子化CSS框架，快速样式开发
  - 响应式设计支持
  - 自定义主题配置
  - 文件体积小，性能优秀

### 2.4 动画库
- **Framer Motion**
  - 强大的动画库
  - 优雅的页面过渡效果
  - 提升用户体验

## 3. 后端技术栈

### 3.1 API服务
- **Next.js API Routes**
  - 与前端同框架，减少技术栈复杂度
  - 支持RESTful API设计
  - 内置中间件支持

### 3.2 数据库ORM
- **Prisma**
  - 类型安全的数据库访问
  - 自动生成TypeScript类型
  - 支持数据库迁移
  - 优秀的开发体验

### 3.3 数据库选择
- **开发环境**: SQLite
  - 零配置，快速开发
  - 文件型数据库，便于备份
- **生产环境**: PostgreSQL
  - 稳定可靠的关系型数据库
  - 支持复杂查询
  - 云服务支持完善

## 4. 数据存储方案

### 4.1 数据库设计

#### 宾客表 (guests)
```sql
CREATE TABLE guests (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  phone VARCHAR(20),
  email VARCHAR(100),
  guest_type ENUM('VIP', '普通宾客', '工作人员'),
  seat_number VARCHAR(10),
  is_checked_in BOOLEAN DEFAULT FALSE,
  checkin_time TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 照片表 (photos)
```sql
CREATE TABLE photos (
  id SERIAL PRIMARY KEY,
  category ENUM('婚纱照', '恋爱时光', '求婚瞬间'),
  url VARCHAR(500) NOT NULL,
  description TEXT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### 祝福留言表 (messages)
```sql
CREATE TABLE messages (
  id SERIAL PRIMARY KEY,
  guest_name VARCHAR(100),
  message TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 4.2 图片存储
- **Cloudinary** (推荐)
  - 免费版提供10GB存储空间
  - 自动图片优化和压缩
  - CDN加速，全球访问
  - 支持多种图片格式转换

## 5. 项目结构

```
li-si-wedding/
├── src/
│   ├── app/                    # Next.js 13+ App Router
│   │   ├── layout.tsx         # 根布局组件
│   │   ├── page.tsx           # 主页
│   │   ├── info/              # 婚礼信息页面
│   │   │   └── page.tsx
│   │   ├── moments/           # 幸福时刻页面
│   │   │   └── page.tsx
│   │   ├── checkin/           # 宾客签到页面
│   │   │   └── page.tsx
│   │   ├── thanks/            # 感谢致辞页面
│   │   │   └── page.tsx
│   │   └── api/               # API路由
│   │       ├── guests/        # 宾客相关API
│   │       ├── photos/        # 照片相关API
│   │       └── messages/      # 留言相关API
│   ├── components/            # 可复用组件
│   │   ├── ui/               # 基础UI组件
│   │   ├── layout/           # 布局组件
│   │   └── features/         # 功能组件
│   ├── lib/                  # 工具函数和配置
│   │   ├── db.ts            # 数据库连接
│   │   ├── utils.ts         # 工具函数
│   │   └── validations.ts   # 数据验证
│   └── types/               # TypeScript类型定义
├── prisma/                  # 数据库相关
│   ├── schema.prisma       # 数据库模式
│   └── migrations/         # 数据库迁移文件
├── public/                 # 静态资源
│   ├── images/            # 图片资源
│   └── icons/             # 图标资源
├── .env.local             # 环境变量
├── .env.example           # 环境变量示例
├── next.config.js         # Next.js配置
├── tailwind.config.js     # Tailwind配置
├── tsconfig.json          # TypeScript配置
└── package.json           # 项目依赖
```

## 6. 部署方案

### 6.1 推荐方案：Vercel

#### 优势
- 与Next.js完美集成，零配置部署
- 全球CDN，访问速度快
- 自动HTTPS证书
- 支持自定义域名
- 免费额度充足

#### 部署步骤
1. 将代码推送到GitHub仓库
2. 在Vercel平台连接GitHub仓库
3. 配置环境变量
4. 自动部署完成

#### 环境变量配置
```bash
# 数据库
DATABASE_URL="postgresql://username:password@host:port/database"

# 图片存储
CLOUDINARY_CLOUD_NAME="your_cloud_name"
CLOUDINARY_API_KEY="your_api_key"
CLOUDINARY_API_SECRET="your_api_secret"

# 其他配置
NEXTAUTH_SECRET="your_secret_key"
NEXTAUTH_URL="https://your-domain.vercel.app"
```

## 7. 开发环境搭建

### 7.1 环境要求
- Node.js 18.0+
- npm 或 yarn
- Git

### 7.2 安装步骤
```bash
# 1. 克隆项目
git clone <repository-url>
cd li-si-wedding

# 2. 安装依赖
npm install

# 3. 配置环境变量
cp .env.example .env.local
# 编辑 .env.local 文件

# 4. 初始化数据库
npx prisma generate
npx prisma db push

# 5. 启动开发服务器
npm run dev
```

### 7.3 开发工具推荐
- **IDE**: Visual Studio Code
- **插件**: 
  - Prisma
  - Tailwind CSS IntelliSense
  - TypeScript Importer
  - ES7+ React/Redux/React-Native snippets

## 8. 性能优化策略

### 8.1 图片优化
- 使用Next.js Image组件
- 实现懒加载
- 多种尺寸适配
- WebP格式支持

### 8.2 代码分割
- 动态导入组件
- 路由级别的代码分割
- 第三方库按需加载

### 8.3 缓存策略
- 静态资源长期缓存
- API响应缓存
- 数据库查询优化

## 9. 安全考虑

### 9.1 数据安全
- 环境变量保护敏感信息
- 数据库连接加密
- 输入数据验证和清理

### 9.2 访问控制
- 设置访问密码或邀请码
- 限制API访问频率
- 防止恶意请求

## 10. 监控和维护

### 10.1 错误监控
- Vercel内置错误监控
- 可集成Sentry进行详细错误追踪

### 10.2 性能监控
- Vercel Analytics
- Core Web Vitals监控

### 10.3 数据备份
- 定期数据库备份
- 图片资源备份
- 代码版本控制

## 11. 成本估算

### 11.1 开发成本
- 开发时间：约2-3周
- 主要成本：时间投入

### 11.2 运营成本
- **Vercel**: 免费版足够使用
- **PostgreSQL**: 约$0-20/月
- **Cloudinary**: 免费版10GB
- **域名**: 约$10-15/年（可选）

### 11.3 总成本
- 首年总成本：约$0-50
- 后续年度成本：约$0-30

## 12. 开发时间线

### 第一阶段（1周）
- 项目初始化
- 基础页面框架
- 数据库设计

### 第二阶段（1周）
- 主页和婚礼信息页面
- 照片展示功能

### 第三阶段（1周）
- 宾客签到系统
- 感谢致辞和留言功能

### 第四阶段（3-5天）
- UI/UX优化
- 动画效果添加
- 测试和部署

---

*本文档将根据项目进展持续更新和完善*
